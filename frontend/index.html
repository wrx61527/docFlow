<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>DocFlow</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<!-- ===== TOP BAR ===== -->
<nav class="navbar navbar-dark bg-dark px-4">
  <span class="navbar-brand">
    <strong>DocFlow</strong> – system obiegu dokumentów
  </span>
  <span class="text-white" id="userBar" style="display:none;">
    Zalogowany: <strong id="user"></strong>
    <button class="btn btn-sm btn-outline-light ms-3" onclick="logout()">Wyloguj</button>
  </span>
</nav>

<div class="container mt-4">

<!-- ===== LOGOWANIE ===== -->
<div id="auth" class="col-md-4 mx-auto">
  <h4>Logowanie / Rejestracja</h4>
  <input id="email" type="email" class="form-control mb-2" placeholder="Email" required>
  <input id="password" type="password" class="form-control mb-2" placeholder="Hasło">
  <button onclick="register()" class="btn btn-secondary w-100 mb-2">Zarejestruj</button>
  <button onclick="login()" class="btn btn-primary w-100">Zaloguj</button>
  <div id="msg" class="mt-2 text-danger"></div>
</div>

<!-- ===== APLIKACJA ===== -->
<div id="app" style="display:none;">

<!-- ===== DASHBOARD ===== -->
<div id="dashboard" class="row g-4">

  <div class="col-md-4">
    <div class="card h-100">
      <div class="card-body">
        <h5>Kategoryzacja dokumentów</h5>
        <p class="text-muted small">Definiowanie kategorii i słów kluczowych.</p>
        <button class="btn btn-warning btn-sm" onclick="showSection('categoriesSection')">
          Przejdź
        </button>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card h-100">
      <div class="card-body">
        <h5>Zarządzanie dokumentami</h5>
        <p class="text-muted small">Dodawanie, klasyfikacja i workflow.</p>
        <button class="btn btn-success btn-sm" onclick="showSection('documentsSection')">
          Przejdź
        </button>
      </div>
    </div>
  </div>

  <div class="col-md-4" id="usersTile" style="display:none;">
    <div class="card h-100 border-danger">
      <div class="card-body">
        <h5>Zarządzanie użytkownikami</h5>
        <p class="text-muted small">Panel administracyjny.</p>
        <button class="btn btn-danger btn-sm" onclick="showSection('usersSection')">
          Przejdź
        </button>
      </div>
    </div>
  </div>

</div>

<!-- ===== KATEGORIE ===== -->
<div id="categoriesSection" style="display:none;" class="mt-4">
  <h4>Kategorie dokumentów</h4>

  <div class="row g-2 mb-3">
    <div class="col-md-3">
      <input id="catName" class="form-control form-control-sm" placeholder="Nazwa kategorii">
    </div>
    <div class="col-md-6">
      <input id="keywords" class="form-control form-control-sm" placeholder="Słowa kluczowe (oddzielone przecinkami)">
    </div>
    <div class="col-md-3 d-flex justify-content-end">
      <button onclick="saveCategory()" class="btn btn-warning btn-sm">
        Zapisz kategorię
      </button>
    </div>
  </div>

  <div id="categories" class="list-group"></div>

  <button class="btn btn-outline-secondary btn-sm mt-3" onclick="backToDashboard()">Powrót</button>
</div>

<!-- ===== DOKUMENTY ===== -->
<div id="documentsSection" style="display:none;" class="mt-4">
  <h4>Dokumenty</h4>

  <!-- DODAWANIE DOKUMENTU -->
  <div class="card mb-3">
    <div class="card-body">
      <h6 class="card-title">Dodaj nowy dokument</h6>

      <div class="row align-items-center">
        <div class="col-md-8">
          <input type="file" id="file" class="form-control form-control-sm">
        </div>
        <div class="col-md-4 text-end">
          <button onclick="upload()" class="btn btn-success btn-sm">
            WYŚLIJ
          </button>
          <button onclick="reclassifyDocuments()" class="btn btn-outline-secondary btn-sm">
            ODŚWIEŻ KLASYFIKACJĘ
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- LISTA DOKUMENTÓW -->
  <ul id="docs" class="list-group"></ul>

  <button class="btn btn-outline-secondary btn-sm mt-3" onclick="backToDashboard()">Powrót</button>
</div>

<!-- ===== UŻYTKOWNICY (ADMIN) ===== -->
<div id="usersSection" style="display:none;" class="mt-4">
  <h4>Zarządzanie użytkownikami</h4>

  <div id="usersList" class="list-group"></div>

  <button class="btn btn-outline-secondary btn-sm mt-3" onclick="backToDashboard()">Powrót</button>
</div>

<script src="app.js"></script>
</body>
</html>
